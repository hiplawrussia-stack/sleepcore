# –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ—Ç—á—ë—Ç: Sprint 1 ‚Äî –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ + Sonya Evolution

**–î–∞—Ç–∞:** 2025-12-23
**–í–µ—Ä—Å–∏—è:** 1.0
**–°—Ç–∞—Ç—É—Å:** –ò–°–°–õ–ï–î–û–í–ê–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û

---

## Executive Summary

–ü—Ä–æ–≤–µ–¥–µ–Ω–æ –≥–ª—É–±–æ–∫–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø–æ 9 –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º –¥–ª—è –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π Sprint 1. –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –Ω–∞—É—á–Ω—É—é –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

| –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫–æ–≤ | –ö–ª—é—á–µ–≤–æ–π –≤—ã–≤–æ–¥ |
|-------------|------------|----------------|
| Adaptive UI –≤ —á–∞—Ç-–±–æ—Ç–∞—Ö | 10+ | –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç retention –Ω–∞ 25-40% |
| Rule Engine –ø–∞—Ç—Ç–µ—Ä–Ω—ã | 8+ | TypeScript-first –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∑—Ä–µ–ª—ã –¥–ª—è production |
| Gamification/Avatar Evolution | 10+ | eQuoo: +21% retention, +90% adherence |
| –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è wellness | 8+ | AI-–ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è: +25-40% retention |
| Telegram InlineKeyboard | 6+ | grammY Menu plugin –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç dynamic ranges |
| Streak psychology | 10+ | Duolingo: 7-–¥–Ω–µ–≤–Ω—ã–π streak = 3.6x engagement |
| Context-aware —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ | 8+ | CARS —Å–∏—Å—Ç–µ–º—ã —Å—Ç–∞–Ω–¥–∞—Ä—Ç –≤ mobile 2025 |
| Sleep app triggers | 8+ | –í–µ—á–µ—Ä–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (20:00) ‚Äî "golden hour" |
| Virtual companion | 10+ | Replika: 77% companionship support rate |

**–û–±—â–∏–π –≤—ã–≤–æ–¥:** Sprint 1 –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–æ—Å–Ω–æ–≤–∞–Ω –Ω–∞—É—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞ (StreakService, ContextAwareMenuService, SonyaPersona) —É–∂–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–Ω–æ–≥–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π.

---

## 1. Adaptive UI/UX –≤ —á–∞—Ç-–±–æ—Ç–∞—Ö 2025

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

| –ü—Ä–∏–Ω—Ü–∏–ø | –ò—Å—Ç–æ—á–Ω–∏–∫ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---------|----------|--------------|
| **Quick Reply Buttons** | [Netguru](https://www.netguru.com/blog/chatbot-ux-tips) | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è —Ç–∏–ø–æ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π |
| **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è** | [Botpress](https://botpress.com/blog/chatbot-design) | –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –ø–æ–≤–µ–¥–µ–Ω–∏—é, location, history –≤ real-time |
| **Context-Aware Design** | [Sendbird](https://sendbird.com/blog/chatbot-ui) | ML-–∞–Ω–∞–ª–∏–∑ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è |
| **Mobile-First** | [Eleken](https://www.eleken.co/blog-posts/chatbot-ui-examples) | Touch-friendly –∫–Ω–æ–ø–∫–∏, –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ layouts |
| **Accessibility** | [Groto](https://www.letsgroto.com/blog/ux-best-practices-for-ai-chatbots) | Screen-reader, –≤—ã—Å–æ–∫–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç, keyboard navigation |

### Best Practices 2025

1. **Adaptive Design Loops** ‚Äî –±–æ—Ç –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç —è–∑—ã–∫ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º
2. **Progressive Disclosure** ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –æ–ø—Ü–∏–∏
3. **Clean Layouts** ‚Äî –º–∏–Ω–∏–º—É–º –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
4. **User Guidance** ‚Äî –≤—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–±—ä—è—Å–Ω—è—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ Sprint 1

- AdaptiveKeyboardService –¥–æ–ª–∂–µ–Ω —Å–∫—Ä—ã–≤–∞—Ç—å –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ –∫–Ω–æ–ø–∫–∏
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å 3 primary actions + 3 secondary (—Å–≤—ë—Ä–Ω—É—Ç—ã)
- Quick Access (SOS, Help) –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω—ã

---

## 2. Rule Engine –ø–∞—Ç—Ç–µ—Ä–Ω—ã TypeScript 2025

### –¢–æ–ø –±–∏–±–ª–∏–æ—Ç–µ–∫

| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ | –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è Sprint 1? |
|------------|-------------|------------------------|
| [GoRules Zen Engine](https://gorules.io/) | Rust bindings, –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | Overkill |
| [Trool](https://github.com/seanpmaxwell/Trool) | TypeScript-first, decision tables | ‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç |
| [rule-engine-js](https://github.com/crafts69guy/rule-engine-js) | JSON-based rules, security built-in | ‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç |
| [node-rules](https://www.nected.ai/blog/rule-engine-in-node-js-javascript) | Forward chaining, –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π | ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è |

### –ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

```typescript
// Forward Chaining Pattern (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
interface Rule {
  id: string;
  condition: (context: UserContext) => boolean;
  action: (keyboard: KeyboardBuilder) => void;
  priority: number;
}

// Rule evaluation
rules
  .filter(rule => rule.condition(context))
  .sort((a, b) => b.priority - a.priority)
  .forEach(rule => rule.action(keyboard));
```

### –†–µ—à–µ–Ω–∏–µ –¥–ª—è Sprint 1

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å **—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π RuleEngine** –≤–º–µ—Å—Ç–æ –≤–Ω–µ—à–Ω–µ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- –ú–µ–Ω—å—à–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- –¢–∏–ø–∏–∑–∞—Ü–∏—è –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- ~100 LOC

---

## 3. Gamification –∏ Avatar Evolution

### –ù–∞—É—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

| –ò—Å—Ç–æ—á–Ω–∏–∫ | –ö–ª—é—á–µ–≤–æ–π –≤—ã–≤–æ–¥ |
|----------|----------------|
| [PMC: eQuoo RCT](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC10403802/) | +21% retention vs control, 90% adherence |
| [PMC: SPARX](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6617915/) | Avatar + CBT: —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ depression treatment |
| [PENguIN 2025](https://www.sciencedirect.com/science/article/pii/S2451958825000016) | Avatars + token economy –¥–ª—è –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–∏–∏ |
| [PMC: Gamification Meta](https://pmc.ncbi.nlm.nih.gov/articles/PMC8669581/) | g=‚Äì0.27 –¥–ª—è depression (small-moderate effect) |

### –≠–ª–µ–º–µ–Ω—Ç—ã eQuoo (8 gamification elements)

1. **Customization** ‚Äî –≤—ã–±–æ—Ä –∞–≤–∞—Ç–∞—Ä–∞ ‚úÖ
2. **Levels** ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å–∏—è ‚úÖ
3. **Progress feedback** ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è ‚úÖ
4. **Points** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –æ—á–∫–æ–≤
5. **Varying narratives** ‚Äî —Ä–∞–∑–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
6. **Personalization** ‚Äî –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é ‚úÖ
7. **Mini games** ‚Äî –º–∏–Ω–∏-–∏–≥—Ä—ã
8. **Badges** ‚Äî –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è ‚úÖ

### –°–æ–Ω—è Evolution ‚Äî –Ω–∞—É—á–Ω–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

| –°—Ç–∞–¥–∏—è | –î–Ω–µ–π | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|--------|------|-------------|
| üê£ –°–æ–≤—ë–Ω–æ–∫ | 0-6 | –ù–∞—á–∞–ª—å–Ω–∞—è —Å—Ç–∞–¥–∏—è, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–Ω–∞–∫–æ–º–∏—Ç—Å—è |
| ü¶â –ú–æ–ª–æ–¥–∞—è —Å–æ–≤–∞ | 7-29 | 7 –¥–Ω–µ–π = 3.6x engagement (Duolingo) |
| ü¶â‚ú® –ú—É–¥—Ä–∞—è —Å–æ–≤–∞ | 30-65 | 30 –¥–Ω–µ–π = habit threshold |
| üèÜ –ú–∞—Å—Ç–µ—Ä —Å–Ω–∞ | 66+ | 66 –¥–Ω–µ–π = habit automation (UCL study) |

### –í–∞–∂–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

> "Chatbots' ability to check in regularly and be present 24/7 allows users to become too attached" ‚Äî [PMC: Companion Chatbots](https://pmc.ncbi.nlm.nih.gov/articles/PMC7084290/)

**Mitigation:**
- –ù–µ –ø–µ—Ä—Å–æ–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –°–æ–Ω—é –∫–∞–∫ "–∂–∏–≤–æ–µ —Å—É—â–µ—Å—Ç–≤–æ"
- –ù–∞–ø–æ–º–∏–Ω–∞—Ç—å, —á—Ç–æ —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Ç–µ—Ä–∞–ø–∏–∏
- –ù–µ –∑–∞–º–µ–Ω—è—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–≤—è–∑–∏

---

## 4. –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –≤ wellness-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö 2025

### Retention Challenge

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ |
|---------|----------|----------|
| 30-day retention (—Å—Ä–µ–¥–Ω—è—è) | **7.9%** | [Orangesoft](https://www.betteryou.ai/why-wellness-apps-have-low-retention-and-engagement/) |
| Best-in-class (MyFitnessPal) | **24%** | Same |
| AI-–ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –ª–∏—Ñ—Ç | **+25-40%** | [Global Wellness Institute](https://www.businessresearchinsights.com/market-reports/wellness-app-market-117356) |

### –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã retention

1. **Personalization Engine** ‚Äî ML-–∞–ª–≥–æ—Ä–∏—Ç–º—ã –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è
2. **Goal-based onboarding** ‚Äî —Å–ø—Ä–æ—Å–∏—Ç—å —Ü–µ–ª—å (—Å–æ–Ω, —Å—Ç—Ä–µ—Å—Å, —Ñ–æ–∫—É—Å)
3. **Context-aware notifications** ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
4. **Gamification + Social** ‚Äî streaks, leaderboards, community
5. **Lifecycle Marketing** ‚Äî re-engagement –ø–æ—Å–ª–µ 7+ –¥–Ω–µ–π

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ Sprint 1

- UserInteractionRepository –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- RuleEngine –ø—Ä–∏–º–µ–Ω—è–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- AdaptiveKeyboardService –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏

---

## 5. Telegram InlineKeyboard best practices

### grammY Framework

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|----------|
| **InlineKeyboard** | –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è inline-–∫–Ω–æ–ø–æ–∫ |
| **Menu Plugin** | –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–µ–Ω—é |
| **Dynamic Strings** | `(ctx) => \`Greet ${ctx.from?.first_name}\`` |
| **Dynamic Ranges** | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–Ω–æ–ø–æ–∫ "–Ω–∞ –ª–µ—Ç—É" |

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

> "You cannot create or change your menus during message handling. All menus must be fully created and registered before your bot starts."

**–†–µ—à–µ–Ω–∏–µ:** Dynamic Ranges –ø–æ–∑–≤–æ–ª—è—é—Ç –∏–∑–º–µ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ runtime.

### grammy-inline-menu

[GitHub: grammy-inline-menu](https://github.com/EdJoPaTo/grammy-inline-menu) ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è tree-like menu structures.

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π `InlineKeyboard` —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–∏, –∞ –Ω–µ Menu plugin ‚Äî –º–µ–Ω—å—à–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, –±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è.

---

## 6. Streak Psychology (Duolingo Research)

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ |
|---------|----------|----------|
| 7-day streak ‚Üí long-term engagement | **3.6x** | [Orizon](https://www.orizon.co/blog/duolingos-gamification-secrets) |
| Streak Freeze ‚Üí churn reduction | **-21%** | Same |
| Streak commitment increase | **+60%** | Same |
| XP leaderboards engagement | **+40%** | Same |
| Badges completion rates | **+30%** | Same |
| DAU/MAU ratio (Q2 2025) | **37%** | [Young Urban Project](https://www.youngurbanproject.com/duolingo-case-study/) |

### The Leniency Paradox

> "Being more lenient with streaks actually increases engagement... their results skyrocketed in the amount of daily average users"

**–í—ã–≤–æ–¥:** Forgiveness-first –ø–æ–¥—Ö–æ–¥ (streak freeze, grace periods) —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ strict –ø–æ–¥—Ö–æ–¥–∞.

### –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ SleepCore

**StreakService —É–∂–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç:**
- ‚úÖ Grace period 3 —á–∞—Å–∞ –ø–æ—Å–ª–µ –ø–æ–ª—É–Ω–æ—á–∏
- ‚úÖ Auto-freeze 1 –≤ –Ω–µ–¥–µ–ª—é
- ‚úÖ No punishment messaging
- ‚úÖ Milestones 3, 7, 14, 30, 66 –¥–Ω–µ–π
- ‚úÖ 66 –¥–Ω–µ–π = habit formation (UCL study)

**–ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ Sprint 1!**

---

## 7. Context-Aware —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### CARS (Context-Aware Recommender Systems)

| –ö–æ–Ω—Ç–µ–∫—Å—Ç | –ü—Ä–∏–º–µ—Ä—ã | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ |
|----------|---------|------------|
| **Temporal** | –í—Ä–µ–º—è –¥–Ω—è, –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ | –£—Ç—Ä–æ–º ‚Äî –¥–Ω–µ–≤–Ω–∏–∫, –≤–µ—á–µ—Ä–æ–º ‚Äî relaxation |
| **Spatial** | –õ–æ–∫–∞—Ü–∏—è | –ù–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ –¥–ª—è Telegram |
| **Social** | –°–æ—Ü–∏–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç | –ù–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ |
| **Behavioral** | –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π | –°–∫—Ä—ã–≤–∞—Ç—å –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ –∫–Ω–æ–ø–∫–∏ |
| **Emotional** | –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ | JITAI vulnerable state |

### Time-of-Day Personalization (Best Practices)

| –í—Ä–µ–º—è | –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|-------|------------|--------------|
| –£—Ç—Ä–æ | Spotify | Upbeat –ø–ª–µ–π–ª–∏—Å—Ç—ã |
| –í–µ—á–µ—Ä | Spotify | Mellow tracks |
| –£—Ç—Ä–æ | Netflix | Short content |
| –í–µ—á–µ—Ä | Netflix | Long-form content |
| –£—Ç—Ä–æ | SleepCore | –î–Ω–µ–≤–Ω–∏–∫ —Å–Ω–∞, recall test |
| –í–µ—á–µ—Ä | SleepCore | Relaxation, rehearsal |

### –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

**ContextAwareMenuService —É–∂–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç:**
- ‚úÖ TimeOfDay (morning, day, evening, night)
- ‚úÖ JITAI vulnerable state detection
- ‚úÖ Emotion-aware UI
- ‚úÖ Proactive suggestions –ø–æ –≤—Ä–µ–º–µ–Ω–∏

---

## 8. Sleep App Time-Based Triggers

### –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

| –ò—Å—Ç–æ—á–Ω–∏–∫ | –í—ã–≤–æ–¥ |
|----------|-------|
| [Frontiers in Sleep 2025](https://www.frontiersin.org/journals/sleep/articles/10.3389/frsle.2025.1499802/full) | Active functions (audio, timing) —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ passive (tracking) |
| [PMC: DOZE App](https://pmc.ncbi.nlm.nih.gov/articles/PMC11596989/) | Regularised bedtime: -0.43h variance, +0.18h TST |
| [Oxford Sleep](https://academic.oup.com/sleep/article/46/7/zsad053/7078038) | Evening audio tools —É–ª—É—á—à–∞—é—Ç sleep quality |

### Golden Hour (20:00)

> "Evening notification (20:00) ‚Äî research 'golden hour' for sleep preparation"

–£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `ContextAwareMenuService.generateProactiveNotification()`.

### Barriers to Engagement

1. Sleep naturally improving
2. Change in routine
3. Not perceiving interventions helpful
4. Lack of time
5. Forgetting

**Mitigation:** Proactive notifications, –Ω–æ –Ω–µ —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã–µ (7+ –¥–Ω–µ–π –¥–ª—è re-engagement).

---

## 9. Virtual Companion –∏ –ü—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ |
|---------|----------|----------|
| Downloads (Replika, Xiaoice) | **500M+** | [Scientific American](https://www.scientificamerican.com/article/what-are-ai-chatbot-companions-doing-to-our-mental-health/) |
| Companionship support | **77.1%** | [PMC: Replika Study](https://pmc.ncbi.nlm.nih.gov/articles/PMC7084290/) |
| Emotional support | **44.6%** | Same |
| Informational support | **15.6%** | Same |

### –†–∏—Å–∫–∏

> "Dysfunctional emotional dependence... users continue to engage with an AI companion despite recognizing its negative impact"

### –°–æ–Ω—è ‚Äî Healthy Companion Design

1. **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –Ω–µ –¥—Ä—É–≥** ‚Äî –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞—Ç—å —Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫—É—é —Ñ—É–Ω–∫—Ü–∏—é
2. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–µ—Ä—Å–æ–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è** ‚Äî —Å–æ–≤–∞, –Ω–µ —á–µ–ª–æ–≤–µ–∫
3. **–ü–æ–æ—â—Ä–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–≤—è–∑–µ–π** ‚Äî –Ω–µ –∑–∞–º–µ–Ω—è—Ç—å –ø—Å–∏—Ö–æ–ª–æ–≥–∞
4. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** ‚Äî —ç—Ç–æ AI-–ø–æ–º–æ—â–Ω–∏–∫

---

## –ú–∞—Ç—Ä–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è Sprint 1

| –ó–∞–¥–∞—á–∞ Sprint 1 | –ù–∞—É—á–Ω–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ | –†–∏—Å–∫ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|-----------------|---------------------|------|-----------|
| UserInteractionRepository | CARS, Behavior tracking | –ù–∏–∑–∫–∏–π | P0 |
| RuleEngine | Forward chaining, Decision tables | –ù–∏–∑–∫–∏–π | P0 |
| AdaptiveKeyboardService | Adaptive UI, 25-40% retention lift | –ù–∏–∑–∫–∏–π | P0 |
| SonyaEvolutionService | Avatar engagement, eQuoo +21% | –°—Ä–µ–¥–Ω–∏–π* | P1 |

*–°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫ ‚Äî –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –∫ –ø–µ—Ä—Å–æ–Ω–∞–∂—É, —Ç—Ä–µ–±—É–µ—Ç healthy design.

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. UserInteractionRepository

```typescript
interface IUserInteraction {
  userId: string;
  command: string;
  timestamp: Date;
  wasClicked: boolean;  // –î–ª—è tracking –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã—Ö –∫–Ω–æ–ø–æ–∫
  context: {
    timeOfDay: TimeOfDay;
    dayOfWeek: number;
  };
}
```

### 2. RuleEngine

```typescript
interface IAdaptationRule {
  id: string;
  name: string;
  condition: (ctx: UserContext) => boolean;
  action: 'show' | 'hide' | 'promote' | 'demote';
  target: string;  // command name
  priority: number;
}
```

### 3. AdaptiveKeyboardService

- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º ContextAwareMenuService
- –î–æ–±–∞–≤–∏—Ç—å tracking –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã—Ö –∫–Ω–æ–ø–æ–∫
- –ü—Ä–∏–º–µ–Ω—è—Ç—å RuleEngine –∫ –±–∞–∑–æ–≤–æ–º—É –Ω–∞–±–æ—Ä—É –∫–æ–º–∞–Ω–¥

### 4. SonyaEvolutionService

```typescript
interface ISonyaStage {
  id: 'owlet' | 'young_owl' | 'wise_owl' | 'master';
  name: string;
  emoji: string;
  requiredDays: number;
  greeting: string;
  celebrationMessage: string;
}
```

---

## –ò—Å—Ç–æ—á–Ω–∏–∫–∏

### Adaptive UI/UX
- [Netguru: Chatbot UX Tips 2025](https://www.netguru.com/blog/chatbot-ux-tips)
- [Botpress: Chatbot Design 2025](https://botpress.com/blog/chatbot-design)
- [Sendbird: Chatbot UI](https://sendbird.com/blog/chatbot-ui)
- [Eleken: Chatbot UI Examples](https://www.eleken.co/blog-posts/chatbot-ui-examples)
- [Groto: AI Chatbot UX](https://www.letsgroto.com/blog/ux-best-practices-for-ai-chatbots)

### Rule Engines
- [Squash.io: Rules Engine TypeScript](https://www.squash.io/tutorial-building-a-rules-engine-with-typescript/)
- [Nected: Rule Engine Node.js](https://www.nected.ai/blog/rule-engine-in-node-js-javascript)
- [GitHub: Trool](https://github.com/seanpmaxwell/Trool)
- [GoRules](https://gorules.io/)

### Gamification Research
- [PMC: eQuoo RCT](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC10403802/)
- [PMC: Gamification Mental Health](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6617915/)
- [PMC: Gamification Meta-Analysis](https://pmc.ncbi.nlm.nih.gov/articles/PMC8669581/)
- [ScienceDirect: PENguIN 2025](https://www.sciencedirect.com/science/article/pii/S2451958825000016)

### Personalization
- [JMIR: Aspire2B 2025](https://formative.jmir.org/2025/1/e63471)
- [Business Research Insights: Wellness App Market](https://www.businessresearchinsights.com/market-reports/wellness-app-market-117356)
- [BetterYou: Wellness App Retention](https://www.betteryou.ai/why-wellness-apps-have-low-retention-and-engagement/)

### Streak Psychology
- [Orizon: Duolingo Gamification](https://www.orizon.co/blog/duolingos-gamification-secrets)
- [Trophy: Streak Psychology](https://trophy.so/blog/the-psychology-of-streaks-how-sylvi-weaponized-duolingos-best-feature-against-them)
- [Young Urban Project: Duolingo Case Study 2025](https://www.youngurbanproject.com/duolingo-case-study/)
- [StriveCloud: Duolingo Gamification](https://strivecloud.io/blog/gamification-examples-boost-user-retention-duolingo/)

### Context-Aware Systems
- [Springer: CARS 2024](https://link.springer.com/article/10.1007/s10462-024-10939-4)
- [ScienceDirect: CARS Review](https://www.sciencedirect.com/science/article/abs/pii/S1574013719301406)
- [ACM TOIS: Mobile Context](https://dl.acm.org/doi/10.1145/3447678)
- [UXPin: Context-Aware Personalization](https://www.uxpin.com/studio/blog/what-is-context-aware-personalization-in-interfaces/)

### Sleep Apps
- [Frontiers in Sleep 2025](https://www.frontiersin.org/journals/sleep/articles/10.3389/frsle.2025.1499802/full)
- [PMC: DOZE Teen Sleep App](https://pmc.ncbi.nlm.nih.gov/articles/PMC11596989/)
- [Oxford Sleep: Audio Tools](https://academic.oup.com/sleep/article/46/7/zsad053/7078038)
- [Sleep Foundation: Best Sleep Apps 2025](https://www.sleepfoundation.org/best-sleep-apps)

### Virtual Companions
- [Scientific American: AI Companions Mental Health](https://www.scientificamerican.com/article/what-are-ai-chatbot-companions-doing-to-our-mental-health/)
- [PMC: Replika Social Support](https://pmc.ncbi.nlm.nih.gov/articles/PMC7084290/)
- [Nature: Emotional Risks AI Companions](https://www.nature.com/articles/s42256-025-01093-9)
- [Springer: Companion AI Impacts](https://link.springer.com/article/10.1007/s00146-025-02318-6)

### grammY Framework
- [grammY: Keyboard Plugin](https://grammy.dev/plugins/keyboard)
- [grammY: Menu Plugin](https://grammy.dev/plugins/menu.html)
- [GitHub: grammy-inline-menu](https://github.com/EdJoPaTo/grammy-inline-menu)

---

**–í—Å–µ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:** 40+
**–î–∞—Ç–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è:** 2025-12-23
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Sprint 1
